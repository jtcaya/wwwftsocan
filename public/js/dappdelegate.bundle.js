(()=>{"use strict";var e={268:(e,t,n)=>{n.d(t,{ET:()=>i,NM:()=>s,Ni:()=>o,Ue:()=>c,d_:()=>u,yJ:()=>d,zt:()=>l});const o={DistributionToDelegators:distributionAbi,VoterWhitelister:voterWhitelisterAbi,FtsoRewardManager:ftsoRewardAbi,WNat:wnatAbi,FlareRegistry:flareAbi};var a=document.getElementById("SelectedNetwork"),r=a?.options[a.selectedIndex].getAttribute("data-registrycontract");a?.options[a.selectedIndex].getAttribute("data-rpcurl"),a?.options[a.selectedIndex].getAttribute("data-chainidhex"),a?.options[a.selectedIndex].value,a?.options[a.selectedIndex].innerHTML;const l=window.ethereum;async function c(e){var t=document.getElementById("SelectedNetwork")?.options[document.getElementById("SelectedNetwork").selectedIndex].getAttribute("data-rpcurl");let n=new(new Web3(t).eth.Contract)(o.FlareRegistry,r);const a=await n.methods.getAllContracts().call(),l=(c=Object.values(a)[0],d=e,Object.keys(c).find((e=>c[e]===d)));var c,d;return a[1][l]}function d(){$.confirm({escapeKey:!0,backgroundDismiss:!1,icon:"fa fa-warning red",title:"<br>Metamask is not installed!",content:"Would you like to install Metamask in your browser?",type:"red",theme:"material",typeAnimated:!0,draggable:!1,buttons:{yes:{btnClass:"btn-red",keys:["enter"],action:function(){window.open("https://metamask.io/download/","_blank").focus()}},no:{}}})}function s(e){return+(Math.round(e+"e+4")+"e-4")}function i(e){document.getElementById("ConnectWalletText").innerText=e}function u(e){document.getElementById("TokenBalance").innerText=e}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(268),t=document.getElementById("SelectedNetwork"),o=(t?.options[t.selectedIndex].getAttribute("data-registrycontract"),t?.options[t.selectedIndex].getAttribute("data-chainidhex")),a=(t?.options[t.selectedIndex].value,e.Ni.WNat),r=e.Ni.VoterWhitelister,l=document.getElementById("ftso-1"),c=document.getElementById("ftso-2"),d=!1,s=document.getElementById("Amount1"),i=document.getElementById("Amount2"),u=!1;function m(){Number(s.value.replace(/[^0-9]/g,""))<1||Number(Amount1.value.replace(/^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",d=!1):50===Number(s.value.replace(/[^0-9]/g,""))||100===Number(Amount1.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",d=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",d=!1)}function g(){Number(i.value.replace(/[^0-9]/g,""))<1||Number(Amount2.value.replace(/[^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",d=!1,u=!1):(50===Number(i.value.replace(/[^0-9]/g,""))||100===Number(Amount2.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",d=!0,u=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",d=!1,u=!1),document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",d=!0,u=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h())}function h(){Number(s.value.replace(/[^0-9]/g,""))+Number(i.value.replace(/[^0-9]/g,""))>100||0===Number(l?.options[l.selectedIndex]?.getAttribute("data-ftso"))||0!==Number(i.value.replace(/[^0-9]/g,""))&&""!==i.value.replace(/[^0-9]/g,"")&&"0"===c?.options[c.selectedIndex]?.getAttribute("data-ftso")?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",d=!1,u=!1):(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",d=!0,u=!0,document.getElementById("ClaimButtonText").innerText="Delegate")}!async function(){var t='<option value="" data-ftso="0" disabled selected hidden>Select FTSO</option>';let n=new Web3(rpcUrl);try{const o=await(0,e.Ue)("VoterWhitelister");let a=new n.eth.Contract(r,o);const d=await a.methods.getFtsoWhitelistedPriceProviders(0).call(),s=JSON.stringify(d);fetch("https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/next/bifrost-wallet.providerlist.json").then((e=>e.json())).then((e=>{for(var n=0;n<d.length;n++){let a;if(!s.includes(d[n])){alert("The FTSO you have delegated to is invalid!");break}for(var o=0;o<e.providers.length;o++)e.providers[o].address===d[n]&&(a=o,t+=`<option value="${n}" data-img="https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/master/assets/${d[n]}.png" data-addr="${d[n]}" data-ftso="1">${e.providers[a].name}</option>`,l.innerHTML=t,c.innerHTML=t)}}))}catch(e){}}(),l.onchange=async()=>{var e=l?.options[l.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon1").src=e,m()},c.onchange=async()=>{var e=c?.options[c.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon2").src=e,g()},s.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),i.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),rpcUrl=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),m(),u&&g(),t.onchange=async()=>{if(rpcUrl=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),o=t?.options[t.selectedIndex]?.getAttribute("data-chainidhex"),t?.options[t.selectedIndex],rpcUrl=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),m(),u&&g(),e.zt||!1!==downloadMetamaskFlag)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]})}catch(e){}else downloadMetamaskFlag=!0,(0,e.yJ)();if(!1===connectWalletBool)if(e.zt||!1!==downloadMetamaskFlag){let t=new Web3(rpcUrl);try{const n=async function(){const e=new ethers.providers.Web3Provider(window.ethereum);let t;try{t=(await e.listAccounts()).length>0}catch(e){t=!1}return t}();if("false"!==await n){const n=await(0,e.Ue)("WNat");let o=new t.eth.Contract(a,n);const r=(await e.zt.request({method:"eth_requestAccounts"}))[0];(0,e.ET)(r);const l=await o.methods.balanceOf(r).call();(0,e.d_)((0,e.NM)(t.utils.fromWei(l,"ether")))}else $.alert("You are not connected!")}catch(e){}}else downloadMetamaskFlag=!0,(0,e.yJ)()},e.zt||!1!==downloadMetamaskFlag?document.getElementById("ConnectWallet").addEventListener("click",(async()=>{if(!1===connectWalletBool){connectWalletBool=!0;let t=new Web3(rpcUrl);try{const n=await(0,e.Ue)("WNat");let o=new t.eth.Contract(wnatAbi,n);const a=(await e.zt.request({method:"eth_requestAccounts"}))[0];(0,e.ET)(a);const r=await o.methods.balanceOf(a).call();(0,e.d_)((0,e.NM)(t.utils.fromWei(r,"ether")))}catch(e){}}else{navigator.clipboard.writeText(document.getElementById("ConnectWalletText").innerText),connectWalletBool=!0;let t=new Web3(rpcUrl);try{const n=await(0,e.Ue)("WNat");let o=new t.eth.Contract(wnatAbi,n);const a=(await e.zt.request({method:"eth_requestAccounts"}))[0];(0,e.ET)(a);const r=await o.methods.balanceOf(a).call();(0,e.d_)((0,e.NM)(t.utils.fromWei(r,"ether")))}catch(e){}}})):(downloadMetamaskFlag=!0,(0,e.yJ)()),e.zt.on("accountsChanged",(async t=>{if(0!==t.length){const n=t[0];(0,e.ET)(n)}else document.getElementById("ConnectWalletText").innerText="Connect Wallet",connectWalletBool=!1})),document.querySelector("#Amount1").addEventListener("input",m),document.querySelector("#Amount2").addEventListener("input",g),e.zt||!1!==downloadMetamaskFlag?document.getElementById("ClaimButton").addEventListener("click",(async()=>{if(d){let o=new Web3(rpcUrl);o.setProvider(e.zt);const r=s.value,d=s.value,i=r.replace(/[^0-9]/g,""),m=d.replace(/[^0-9]/g,""),g=100*Number(i),h=100*Number(m);var t=l?.options[l.selectedIndex]?.getAttribute("data-addr"),n=c?.options[c.selectedIndex]?.getAttribute("data-addr");try{const r=await(0,e.Ue)("WNat");let l=new o.eth.Contract(a,r);const c=(await e.zt.request({method:"eth_requestAccounts"}))[0],d={from:c,to:r,data:l.methods.undelegateAll().encodeABI()},s={from:c,to:r,data:l.methods.delegate(t,g).encodeABI()};if(showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[d]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[s]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),u){const t={from:c,to:r,data:l.methods.delegate(n,h).encodeABI()};showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[t]}).then((e=>showConfirm(e))).catch((e=>showFail()))}))}}catch(e){}}else $.alert("Please enter valid value")})):(downloadMetamaskFlag=!0,(0,e.yJ)())})()})();