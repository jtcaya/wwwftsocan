(()=>{"use strict";var e={268:(e,t,n)=>{n.d(t,{ET:()=>s,NM:()=>i,Ni:()=>a,Ue:()=>d,d_:()=>u,yJ:()=>c,zt:()=>l});const a={DistributionToDelegators:distributionAbi,VoterWhitelister:voterWhitelisterAbi,FtsoRewardManager:ftsoRewardAbi,WNat:wnatAbi,FlareRegistry:flareAbi};var o=document.getElementById("SelectedNetwork"),r=o?.options[o.selectedIndex].getAttribute("data-registrycontract");o?.options[o.selectedIndex].getAttribute("data-rpcurl"),o?.options[o.selectedIndex].getAttribute("data-chainidhex"),o?.options[o.selectedIndex].value,o?.options[o.selectedIndex].innerHTML;const l=window.ethereum;async function d(e){var t=document.getElementById("SelectedNetwork")?.options[document.getElementById("SelectedNetwork").selectedIndex].getAttribute("data-rpcurl");let n=new(new Web3(t).eth.Contract)(a.FlareRegistry,r);const o=await n.methods.getAllContracts().call(),l=(d=Object.values(o)[0],c=e,Object.keys(d).find((e=>d[e]===c)));var d,c;return o[1][l]}function c(){$.confirm({escapeKey:!0,backgroundDismiss:!1,icon:"fa fa-warning red",title:"<br>Metamask is not installed!",content:"Would you like to install Metamask in your browser?",type:"red",theme:"material",typeAnimated:!0,draggable:!1,buttons:{yes:{btnClass:"btn-red",keys:["enter"],action:function(){window.open("https://metamask.io/download/","_blank").focus()}},no:{}}})}function i(e){return+(Math.round(e+"e+4")+"e-4")}function s(e){document.getElementById("ConnectWalletText").innerText=e}function u(e){document.getElementById("TokenBalance").innerText=e}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(268),t=document.getElementById("SelectedNetwork"),a=(t?.options[t.selectedIndex].getAttribute("data-registrycontract"),t?.options[t.selectedIndex].getAttribute("data-chainidhex")),o=(t?.options[t.selectedIndex].value,e.Ni.WNat),r=e.Ni.VoterWhitelister,l=document.getElementById("ftso-1"),d=document.getElementById("ftso-2"),c=!1,i=document.getElementById("Amount1"),s=document.getElementById("Amount2"),u=!1;function m(){Number(i.value.replace(/[^0-9]/g,""))<1||Number(Amount1.value.replace(/^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",c=!1):50===Number(i.value.replace(/[^0-9]/g,""))||100===Number(Amount1.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",c=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",c=!1)}function g(){Number(s.value.replace(/[^0-9]/g,""))<1||Number(Amount2.value.replace(/[^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",c=!1,u=!1):(50===Number(s.value.replace(/[^0-9]/g,""))||100===Number(Amount2.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",c=!0,u=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",c=!1,u=!1),document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",c=!0,u=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h())}function h(){Number(i.value.replace(/[^0-9]/g,""))+Number(s.value.replace(/[^0-9]/g,""))>100||0===Number(l?.options[l.selectedIndex]?.getAttribute("data-ftso"))||0!==Number(s.value.replace(/[^0-9]/g,""))&&""!==s.value.replace(/[^0-9]/g,"")&&"0"===d?.options[d.selectedIndex]?.getAttribute("data-ftso")?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",c=!1,u=!1):(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",c=!0,u=!0,document.getElementById("ClaimButtonText").innerText="Delegate")}!async function(){var t='<option value="" data-ftso="0" disabled selected hidden>Select FTSO</option>';let n=new Web3(rpcUrl);try{const a=await(0,e.Ue)("VoterWhitelister");let o=new n.eth.Contract(r,a);const c=await o.methods.getFtsoWhitelistedPriceProviders(0).call(),i=JSON.stringify(c);fetch("https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/next/bifrost-wallet.providerlist.json").then((e=>e.json())).then((e=>{for(var n=0;n<c.length;n++){let o;if(!i.includes(c[n])){alert("The FTSO you have delegated to is invalid!");break}for(var a=0;a<e.providers.length;a++)e.providers[a].address===c[n]&&(o=a,t+=`<option value="${n}" data-img="https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/master/assets/${c[n]}.png" data-addr="${c[n]}" data-ftso="1">${e.providers[o].name}</option>`,l.innerHTML=t,d.innerHTML=t)}}))}catch(e){}}(),l.onchange=async()=>{var e=l?.options[l.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon1").src=e,m()},d.onchange=async()=>{var e=d?.options[d.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon2").src=e,g()},i.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),s.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),rpcUrl=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),m(),u&&g(),t.onchange=async()=>{if(rpcUrl=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),a=t?.options[t.selectedIndex]?.getAttribute("data-chainidhex"),t?.options[t.selectedIndex],rpcUrl=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),m(),u&&g(),e.zt||!1!==downloadMetamaskFlag)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(e){}else downloadMetamaskFlag=!0,(0,e.yJ)();if(!1===connectWalletBool)if(e.zt||!1!==downloadMetamaskFlag){new Web3(rpcUrl);try{const e=isConnected();"false"!==await e?document.getElementById("ConnectWallet").click():$.alert("You are not connected!")}catch(e){}}else downloadMetamaskFlag=!0,(0,e.yJ)()},e.zt||!1!==downloadMetamaskFlag?document.getElementById("ConnectWallet").addEventListener("click",(async()=>{if(!1===connectWalletBool){connectWalletBool=!0;let t=new Web3(rpcUrl);try{const n=await(0,e.Ue)("WNat");let a=new t.eth.Contract(wnatAbi,n);const o=(await e.zt.request({method:"eth_requestAccounts"}))[0];(0,e.ET)(o);const r=await a.methods.balanceOf(o).call();(0,e.d_)((0,e.NM)(t.utils.fromWei(r,"ether")))}catch(e){}}else{navigator.clipboard.writeText(document.getElementById("ConnectWalletText").innerText),connectWalletBool=!0;let t=new Web3(rpcUrl);try{const n=await(0,e.Ue)("WNat");let a=new t.eth.Contract(wnatAbi,n);const o=(await e.zt.request({method:"eth_requestAccounts"}))[0];(0,e.ET)(o);const r=await a.methods.balanceOf(o).call();(0,e.d_)((0,e.NM)(t.utils.fromWei(r,"ether")))}catch(e){}}})):(downloadMetamaskFlag=!0,(0,e.yJ)()),"undefined"!=typeof accounts&&accounts!==[]&&window.ethereum.on("accountsChanged",(async t=>{if(0!==t.length){const n=t[0];(0,e.ET)(n)}else document.getElementById("ConnectWalletText").innerText="Connect Wallet",connectWalletBool=!1})),window.ethereum.on("chainChanged",(async n=>{for(var o=0;o<t?.options.length;o++)if(t?.options[o].getAttribute("data-chainidhex")===String(n)){t.options.selectedIndex=o,t.dispatchEvent(new Event("change"));break}if(e.zt||!1!==downloadMetamaskFlag)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(e){}else downloadMetamaskFlag=!0,(0,e.yJ)()})),document.querySelector("#Amount1").addEventListener("input",m),document.querySelector("#Amount2").addEventListener("input",g),e.zt||!1!==downloadMetamaskFlag?document.getElementById("ClaimButton").addEventListener("click",(async()=>{if(c){let a=new Web3(rpcUrl);a.setProvider(e.zt);const r=i.value,c=i.value,s=r.replace(/[^0-9]/g,""),m=c.replace(/[^0-9]/g,""),g=100*Number(s),h=100*Number(m);var t=l?.options[l.selectedIndex]?.getAttribute("data-addr"),n=d?.options[d.selectedIndex]?.getAttribute("data-addr");try{const r=await(0,e.Ue)("WNat");let l=new a.eth.Contract(o,r);const d=(await e.zt.request({method:"eth_requestAccounts"}))[0],c={from:d,to:r,data:l.methods.undelegateAll().encodeABI()},i={from:d,to:r,data:l.methods.delegate(t,g).encodeABI()};if(showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[c]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[i]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),u){const t={from:d,to:r,data:l.methods.delegate(n,h).encodeABI()};showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[t]}).then((e=>showConfirm(e))).catch((e=>showFail()))}))}}catch(e){}}else $.alert("Please enter valid value")})):(downloadMetamaskFlag=!0,(0,e.yJ)())})()})();