(()=>{"use strict";var e={268:(e,t,n)=>{n.d(t,{ET:()=>d,Ni:()=>o,Ue:()=>r,d_:()=>i,zt:()=>a});const o={DistributionToDelegators:distributionAbi,VoterWhitelister:voterWhitelisterAbi,FtsoRewardManager:ftsoRewardAbi,WNat:wnatAbi,FlareRegistry:flareAbi};document.getElementById("SelectedNetwork");const a=window.ethereum;async function r(e,t){let n=new(new Web3(t).eth.Contract)(o.FlareRegistry,flrAddr);const a=await n.methods.getAllContracts().call(),r=(d=Object.values(a)[0],i=e,Object.keys(d).find((e=>d[e]===i)));var d,i;return a[1][r]}function d(e){document.getElementById("ConnectWalletText").innerText=e}function i(e){document.getElementById("TokenBalance").innerText=e}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(268);function t(e,t){let n=document.getElementById("Amount1");Number(n.value.replace(/[^0-9]/g,""))<1||Number(Amount1.value.replace(/^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount"):50===Number(n.value.replace(/[^0-9]/g,""))||100===Number(Amount1.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",!0,document.getElementById("ClaimButtonText").innerText="Delegate",a()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount")}function o(e,t){let n=document.getElementById("Amount2");Number(n.value.replace(/[^0-9]/g,""))<1||Number(Amount2.value.replace(/[^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",!1):50===Number(n.value.replace(/[^0-9]/g,""))||100===Number(Amount2.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",!0,!0,document.getElementById("ClaimButtonText").innerText="Delegate",a()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",!1)}function a(e,t){let n=document.getElementById("Amount1"),o=document.getElementById("Amount2");Number(n.value.replace(/[^0-9]/g,""))+Number(o.value.replace(/[^0-9]/g,""))>100||0===Number(ftso1?.options[ftso1.selectedIndex]?.getAttribute("data-ftso"))||0!==Number(o.value.replace(/[^0-9]/g,""))&&""!==o.value.replace(/[^0-9]/g,"")&&"0"===ftso2?.options[ftso2.selectedIndex]?.getAttribute("data-ftso")?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount"):(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",document.getElementById("ClaimButtonText").innerText="Delegate")}e.Ni.WNat,e.Ni.VoterWhitelister;window.onload=async n=>{var a,r,d,i,l=document.getElementById("Amount1"),s=document.getElementById("Amount2"),c=document.getElementById("ftso-1"),u=document.getElementById("ftso-2");!async function(e,t){var n='<option value="" data-ftso="0" disabled selected hidden>Select FTSO</option>',o="",a="",r=document.getElementById("SelectedNetwork");let d=new Web3(r?.options[r.selectedIndex].getAttribute("data-rpcurl")),i=new d.eth.Contract(flrAbi,flrAddr);try{const r=await i.methods.getAllContracts().call(),l=getKeyByValue(Object.values(r)[0],"VoterWhitelister"),s=r[1][l];let c=new d.eth.Contract(voterWhitelisterAbiLocal,s);const u=await c.methods.getFtsoWhitelistedPriceProviders(0).call(),m=JSON.stringify(u);fetch(dappUrlBaseAddr+"bifrost-wallet.providerlist.json").then((e=>e.json())).then((r=>{let d;r.providers.sort(((e,t)=>e.name>t.name?1:-1));for(var i=0;i<r.providers.length;i++)for(var l=0;l<u.length;l++)if(r.providers[i].address===u[l]){if(d=i,!m.includes(u[l])){alert("The FTSO you have delegated to is invalid!");break}"FTSOCAN"===r.providers[d].name?o+=`<option value="${l}" data-img="${dappUrlBaseAddr}assets/${u[l]}.png" data-addr="${u[l]}" data-ftso="1">${r.providers[d].name}</option>`:a+=`<option value="${l}" data-img="${dappUrlBaseAddr}assets/${u[l]}.png" data-addr="${u[l]}" data-ftso="1">${r.providers[d].name}</option>`,e.innerHTML=n+o+a,t.innerHTML=n+o+a}}))}catch(e){}}(c,u),await async function(t){return new Promise((n=>{setTimeout((async()=>{var o=document.getElementById("SelectedNetwork");for(const e in dappNetworks){var a=document.createElement("option");a.value=dappNetworks[e].id,a.text=dappNetworks[e].chainidentifier,a.setAttribute("data-chainidhex","0x"+dappNetworks[e].chainid.toString(16)),a.setAttribute("data-rpcurl",dappNetworks[e].rpcurl),a.setAttribute("data-registrycontract",dappNetworks[e].registrycontract),o.appendChild(a)}o.options[0].setAttribute("selected","selected"),o.options.selectedIndex=Number(o.options[0].value)-1,await e.zt.request({method:"eth_requestAccounts"}).then((async function(){e.zt?(t=!0,async function(){return!!(await e.zt.request({method:"eth_accounts"})).length}().then((async function(){await e.zt.request({method:"eth_accounts"}).then((async function(){await e.zt.request({method:"eth_chainId"}).then((async function(e){var a;a=o.options[0].getAttribute("data-chainidhex");for(var r=0;r<o.options.length;r++)o.options[r].getAttribute("data-chainidhex")===e?(o.options[r].setAttribute("selected","selected"),o.options.selectedIndex=Number(o.options[r].value)-1,a=e):o.options[r].removeAttribute("selected");if(console.log(e),!0===t)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]}).catch((e=>console.error(e)))}catch(e){if(console.log(e),4902===e.code)try{await ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:a,rpcUrls:[o.options[o.selectedIndex].getAttribute("data-rpcurl")],chainName:`${o.options[o.selectedIndex].innerText} Mainnet`,iconUrls:[`https://portal.flare.network/token-logos/${o.options[o.selectedIndex].innerText}.svg`],nativeCurrency:{name:`${o.options[o.selectedIndex].innerText}`,symbol:`${o.options[o.selectedIndex].innerText}`,decimals:18}}]})}catch(e){throw e}}n()}))}))}))):(t=!1,downloadMetamask())}))}),200)}))}(undefined).then(async function(e,t,n,o,a){return new Promise((r=>{setTimeout((()=>{var d=document.getElementById("SelectedNetwork");e=d?.options[d.selectedIndex].getAttribute("data-rpcurl"),t=d?.options[d.selectedIndex].getAttribute("data-chainidhex"),n=d?.options[d.selectedIndex].value,console.log(n),void 0===o&&void 0===a||(o=d?.options[d.selectedIndex].innerHTML,a="W"+o);var i={};i.selectedNetwork=d,i.rpcUrl=e,i.chainIdHex=t,i.networkValue=n,i.tokenIdentifier=o,i.wrappedTokenIdentifier=a,r(i)}),200)}))}(a,r,d,i)),c.onchange=async()=>{var e=c?.options[c.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon1").src=e,t()},u.onchange=async()=>{var e=u?.options[u.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon2").src=e,o()},l.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),s.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),r=void 0,o(),a.onchange=async()=>{r=void 0,d=void 0,i=void 0,t()},"undefined"!=typeof accounts&&accounts!==[]&&window.ethereum.on("accountsChanged",(async t=>{if(0!==t.length){const n=t[0];(0,e.ET)(n)}else document.getElementById("ConnectWalletText").innerText="Connect Wallet",connectWalletBool=!1})),window.ethereum.on("chainChanged",(async e=>{for(var t=0;t<void 0;t++)if(void 0===String(e)){a.options.selectedIndex=t,a.dispatchEvent(new Event("change"));break}})),document.querySelector("#Amount1").addEventListener("input",t()),document.querySelector("#Amount2").addEventListener("input",o())}})()})();