(()=>{"use strict";var e={268:(e,t,n)=>{n.d(t,{ET:()=>c,NM:()=>s,Ni:()=>o,Ue:()=>d,d_:()=>u,yJ:()=>i,zt:()=>r});const o={DistributionToDelegators:distributionAbi,VoterWhitelister:voterWhitelisterAbi,FtsoRewardManager:ftsoRewardAbi,WNat:wnatAbi,FlareRegistry:flareAbi};var a=document.getElementById("SelectedNetwork"),l=a?.options[a.selectedIndex].getAttribute("data-registrycontract");a?.options[a.selectedIndex].getAttribute("data-rpcurl"),a?.options[a.selectedIndex].getAttribute("data-chainidhex"),a?.options[a.selectedIndex].value,a?.options[a.selectedIndex].innerHTML;const r=window.ethereum;async function d(e){var t=document.getElementById("SelectedNetwork")?.options[document.getElementById("SelectedNetwork").selectedIndex].getAttribute("data-rpcurl");let n=new(new Web3(t).eth.Contract)(o.FlareRegistry,l);const a=await n.methods.getAllContracts().call(),r=(d=Object.values(a)[0],i=e,Object.keys(d).find((e=>d[e]===i)));var d,i;return a[1][r]}function i(){$.confirm({escapeKey:!0,backgroundDismiss:!1,icon:"fa fa-warning red",title:"<br>Metamask is not installed!",content:"Would you like to install Metamask in your browser?",type:"red",theme:"material",typeAnimated:!0,draggable:!1,buttons:{yes:{btnClass:"btn-red",keys:["enter"],action:function(){window.open("https://metamask.io/download/","_blank").focus()}},no:{}}})}function s(e){return+(Math.round(e+"e+4")+"e-4")}function c(e){document.getElementById("ConnectWalletText").innerText=e}function u(e){document.getElementById("TokenBalance").innerText=e}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(268),t=document.getElementById("SelectedNetwork"),o=(t?.options[t.selectedIndex].getAttribute("data-registrycontract"),t?.options[t.selectedIndex].getAttribute("data-rpcurl")),a=t?.options[t.selectedIndex].getAttribute("data-chainidhex"),l=(t?.options[t.selectedIndex].value,t?.options[t.selectedIndex].innerHTML,t=document.getElementById("SelectedNetwork"),t?.options[t.selectedIndex].getAttribute("data-registrycontract"),a=t?.options[t.selectedIndex].getAttribute("data-chainidhex"),t?.options[t.selectedIndex].value,e.Ni.WNat),r=e.Ni.VoterWhitelister,d=document.getElementById("ftso-1"),i=document.getElementById("ftso-2"),s=!1,c=document.getElementById("Amount1"),u=document.getElementById("Amount2"),m=!1;function g(){Number(c.value.replace(/[^0-9]/g,""))<1||Number(Amount1.value.replace(/^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",s=!1):50===Number(c.value.replace(/[^0-9]/g,""))||100===Number(Amount1.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",s=!0,document.getElementById("ClaimButtonText").innerText="Delegate",y()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",s=!1)}function h(){Number(u.value.replace(/[^0-9]/g,""))<1||Number(Amount2.value.replace(/[^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",s=!1,m=!1):(50===Number(u.value.replace(/[^0-9]/g,""))||100===Number(Amount2.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",s=!0,m=!0,document.getElementById("ClaimButtonText").innerText="Delegate",y()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",s=!1,m=!1),document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",s=!0,m=!0,document.getElementById("ClaimButtonText").innerText="Delegate",y())}function y(){Number(c.value.replace(/[^0-9]/g,""))+Number(u.value.replace(/[^0-9]/g,""))>100||0===Number(d?.options[d.selectedIndex]?.getAttribute("data-ftso"))||0!==Number(u.value.replace(/[^0-9]/g,""))&&""!==u.value.replace(/[^0-9]/g,"")&&"0"===i?.options[i.selectedIndex]?.getAttribute("data-ftso")?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",s=!1,m=!1):(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",s=!0,m=!0,document.getElementById("ClaimButtonText").innerText="Delegate")}!async function(){var t='<option value="" data-ftso="0" disabled selected hidden>Select FTSO</option>';let n=new Web3(o);try{const o=await(0,e.Ue)("VoterWhitelister");let a=new n.eth.Contract(r,o);const l=await a.methods.getFtsoWhitelistedPriceProviders(0).call(),s=JSON.stringify(l);fetch("https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/next/bifrost-wallet.providerlist.json").then((e=>e.json())).then((e=>{for(var n=0;n<l.length;n++){let a;if(!s.includes(l[n])){alert("The FTSO you have delegated to is invalid!");break}for(var o=0;o<e.providers.length;o++)e.providers[o].address===l[n]&&(a=o,t+=`<option value="${n}" data-img="https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/master/assets/${l[n]}.png" data-addr="${l[n]}" data-ftso="1">${e.providers[a].name}</option>`,d.innerHTML=t,i.innerHTML=t)}}))}catch(e){}}(),d.onchange=async()=>{var e=d?.options[d.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon1").src=e,g()},i.onchange=async()=>{var e=i?.options[i.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon2").src=e,h()},c.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),u.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),o=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),g(),m&&h(),t.onchange=async()=>{if(o=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),a=t?.options[t.selectedIndex]?.getAttribute("data-chainidhex"),t?.options[t.selectedIndex],o=t?.options[t.selectedIndex]?.getAttribute("data-rpcurl"),g(),m&&h(),e.zt||!1!==downloadMetamaskFlag)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(e){}else downloadMetamaskFlag=!0,(0,e.yJ)();if(!1===connectWalletBool)if(e.zt||!1!==downloadMetamaskFlag){new Web3(o);try{const e=isConnected();"false"!==await e?document.getElementById("ConnectWallet").click():$.alert("You are not connected!")}catch(e){}}else downloadMetamaskFlag=!0,(0,e.yJ)()},e.zt||!1!==downloadMetamaskFlag?document.getElementById("ConnectWallet").addEventListener("click",(async()=>{if(!1===connectWalletBool){connectWalletBool=!0;let t=new Web3(o);try{const n=await(0,e.Ue)("WNat");let o=new t.eth.Contract(wnatAbi,n);const a=(await e.zt.request({method:"eth_requestAccounts"}))[0];(0,e.ET)(a);const l=await o.methods.balanceOf(a).call();(0,e.d_)((0,e.NM)(t.utils.fromWei(l,"ether")))}catch(e){}}else{navigator.clipboard.writeText(document.getElementById("ConnectWalletText").innerText),connectWalletBool=!0;let t=new Web3(o);try{const n=await(0,e.Ue)("WNat");let o=new t.eth.Contract(wnatAbi,n);const a=(await e.zt.request({method:"eth_requestAccounts"}))[0];(0,e.ET)(a);const l=await o.methods.balanceOf(a).call();(0,e.d_)((0,e.NM)(t.utils.fromWei(l,"ether")))}catch(e){}}})):(downloadMetamaskFlag=!0,(0,e.yJ)()),"undefined"!=typeof accounts&&accounts!==[]&&window.ethereum.on("accountsChanged",(async t=>{if(0!==t.length){const n=t[0];(0,e.ET)(n)}else document.getElementById("ConnectWalletText").innerText="Connect Wallet",connectWalletBool=!1})),window.ethereum.on("chainChanged",(async n=>{for(var o=0;o<t?.options.length;o++)if(t?.options[o].getAttribute("data-chainidhex")===String(n)){t.options.selectedIndex=o,t.dispatchEvent(new Event("change"));break}if(e.zt||!1!==downloadMetamaskFlag)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(e){}else downloadMetamaskFlag=!0,(0,e.yJ)()})),document.querySelector("#Amount1").addEventListener("input",g),document.querySelector("#Amount2").addEventListener("input",h),e.zt||!1!==downloadMetamaskFlag?document.getElementById("ClaimButton").addEventListener("click",(async()=>{if(s){let a=new Web3(o);a.setProvider(e.zt);const r=c.value,s=c.value,u=r.replace(/[^0-9]/g,""),g=s.replace(/[^0-9]/g,""),h=100*Number(u),y=100*Number(g);var t=d?.options[d.selectedIndex]?.getAttribute("data-addr"),n=i?.options[i.selectedIndex]?.getAttribute("data-addr");try{const o=await(0,e.Ue)("WNat");let r=new a.eth.Contract(l,o);const d=(await e.zt.request({method:"eth_requestAccounts"}))[0],i={from:d,to:o,data:r.methods.undelegateAll().encodeABI()},s={from:d,to:o,data:r.methods.delegate(t,h).encodeABI()};if(showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[i]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[s]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),m){const t={from:d,to:o,data:r.methods.delegate(n,y).encodeABI()};showSpinner((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[t]}).then((e=>showConfirm(e))).catch((e=>showFail()))}))}}catch(e){}}else $.alert("Please enter valid value")})):(downloadMetamaskFlag=!0,(0,e.yJ)())})()})();