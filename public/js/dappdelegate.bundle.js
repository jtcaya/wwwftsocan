(()=>{"use strict";var e,t,n,a,o={265:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(268),o=document.getElementById("SelectedNetwork"),r=(o?.options[o.selectedIndex].getAttribute("data-registrycontract"),o?.options[o.selectedIndex].getAttribute("data-chainidhex")),l=(o?.options[o.selectedIndex].value,a.Ni.WNat),c=a.Ni.VoterWhitelister,d=document.getElementById("ftso-1"),s=document.getElementById("ftso-2"),i=!1,u=document.getElementById("Amount1"),m=document.getElementById("Amount2"),g=!1;function h(){Number(u.value.replace(/[^0-9]/g,""))<1||Number(Amount1.value.replace(/^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",i=!1):50===Number(u.value.replace(/[^0-9]/g,""))||100===Number(Amount1.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",i=!0,document.getElementById("ClaimButtonText").innerText="Delegate",p()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",i=!1)}function y(){Number(m.value.replace(/[^0-9]/g,""))<1||Number(Amount2.value.replace(/[^0-9]/g,""))>100?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",i=!1,g=!1):(50===Number(m.value.replace(/[^0-9]/g,""))||100===Number(Amount2.value.replace(/[^0-9]/g,""))?(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",i=!0,g=!0,document.getElementById("ClaimButtonText").innerText="Delegate",p()):(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",i=!1,g=!1),document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",i=!0,g=!0,document.getElementById("ClaimButtonText").innerText="Delegate",p())}function p(){Number(u.value.replace(/[^0-9]/g,""))+Number(m.value.replace(/[^0-9]/g,""))>100||0===Number(d?.options[d.selectedIndex]?.getAttribute("data-ftso"))||0!==Number(m.value.replace(/[^0-9]/g,""))&&""!==m.value.replace(/[^0-9]/g,"")&&"0"===s?.options[s.selectedIndex]?.getAttribute("data-ftso")?(document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",i=!1,g=!1):(document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer",i=!0,g=!0,document.getElementById("ClaimButtonText").innerText="Delegate")}async function b(){const e=new ethers.providers.Web3Provider(window.ethereum);let t;try{t=(await e.listAccounts()).length>0}catch(e){t=!1}return t}async function w(){var e='<option value="" data-ftso="0" disabled selected hidden>Select FTSO</option>';let t=new Web3(rpcUrl);try{const n=await(0,a.Ue)("VoterWhitelister");let o=new t.eth.Contract(c,n);const r=await o.methods.getFtsoWhitelistedPriceProviders(0).call(),l=JSON.stringify(r);fetch("https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/next/bifrost-wallet.providerlist.json").then((e=>e.json())).then((t=>{for(var n=0;n<r.length;n++){let o;if(!l.includes(r[n])){alert("The FTSO you have delegated to is invalid!");break}for(var a=0;a<t.providers.length;a++)t.providers[a].address===r[n]&&(o=a,e+=`<option value="${n}" data-img="https://raw.githubusercontent.com/TowoLabs/ftso-signal-providers/master/assets/${r[n]}.png" data-addr="${r[n]}" data-ftso="1">${t.providers[o].name}</option>`,d.innerHTML=e,s.innerHTML=e)}}))}catch(e){}}if(a.zt||!1!==downloadMetamaskFlag)try{await a.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})}catch(B){}else downloadMetamaskFlag=!0,(0,a.yJ)();w(),d.onchange=async()=>{var e=d?.options[d.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon1").src=e,h()},s.onchange=async()=>{var e=s?.options[s.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon2").src=e,y()},u.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),m.addEventListener("input",(function(){var e=this.value;-1===e.search("%")&&(e+="%");var t=e.length-1;0===t?(this.value=e.substring(0,t),this.setSelectionRange(t,t)):(this.value=e.substring(0,t)+"%",this.setSelectionRange(t,t))})),rpcUrl=o?.options[o.selectedIndex]?.getAttribute("data-rpcurl"),h(),g&&y(),o.onchange=async()=>{if(rpcUrl=o?.options[o.selectedIndex]?.getAttribute("data-rpcurl"),r=o?.options[o.selectedIndex]?.getAttribute("data-chainidhex"),o?.options[o.selectedIndex],rpcUrl=o?.options[o.selectedIndex]?.getAttribute("data-rpcurl"),h(),g&&y(),a.zt||!1!==downloadMetamaskFlag)try{await a.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})}catch(e){}else downloadMetamaskFlag=!0,(0,a.yJ)();if(!1===connectWalletBool)if(a.zt||!1!==downloadMetamaskFlag){let e=new Web3(rpcUrl);try{const t=b();if("false"!==await t){const t=await(0,a.Ue)("WNat");let n=new e.eth.Contract(l,t);const o=(await a.zt.request({method:"eth_requestAccounts"}))[0];(0,a.ET)(o);const r=await n.methods.balanceOf(o).call();(0,a.d_)((0,a.NM)(e.utils.fromWei(r,"ether")))}else $.alert("You are not connected!")}catch(e){}}else downloadMetamaskFlag=!0,(0,a.yJ)()},a.zt||!1!==downloadMetamaskFlag?document.getElementById("ConnectWallet").addEventListener("click",(async()=>{if(!1===connectWalletBool){connectWalletBool=!0;let e=new Web3(rpcUrl);try{const t=await(0,a.Ue)("WNat");let n=new e.eth.Contract(wnatAbi,t);const o=(await a.zt.request({method:"eth_requestAccounts"}))[0];(0,a.ET)(o);const r=await n.methods.balanceOf(o).call();(0,a.d_)((0,a.NM)(e.utils.fromWei(r,"ether")))}catch(e){}}else{navigator.clipboard.writeText(document.getElementById("ConnectWalletText").innerText),connectWalletBool=!0;let e=new Web3(rpcUrl);try{const t=await(0,a.Ue)("WNat");let n=new e.eth.Contract(wnatAbi,t);const o=(await a.zt.request({method:"eth_requestAccounts"}))[0];(0,a.ET)(o);const r=await n.methods.balanceOf(o).call();(0,a.d_)((0,a.NM)(e.utils.fromWei(r,"ether")))}catch(e){}}})):(downloadMetamaskFlag=!0,(0,a.yJ)()),"undefined"!=typeof accounts&&accounts!==[]&&window.ethereum.on("accountsChanged",(async e=>{if(0!==e.length){const t=e[0];(0,a.ET)(t)}else document.getElementById("ConnectWalletText").innerText="Connect Wallet",connectWalletBool=!1})),window.ethereum.on("chainChanged",(async e=>{for(var t=0;t<o?.options.length;t++)if(o?.options[t].getAttribute("data-chainidhex")===String(e)){o.value=o.options[t].value,o.dispatchEvent(new Event("change"));break}if(a.zt||!1!==downloadMetamaskFlag)try{await a.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})}catch(e){}else downloadMetamaskFlag=!0,(0,a.yJ)()})),document.querySelector("#Amount1").addEventListener("input",h),document.querySelector("#Amount2").addEventListener("input",y),a.zt||!1!==downloadMetamaskFlag?document.getElementById("ClaimButton").addEventListener("click",(async()=>{if(i){let n=new Web3(rpcUrl);n.setProvider(a.zt);const o=u.value,r=u.value,c=o.replace(/[^0-9]/g,""),i=r.replace(/[^0-9]/g,""),m=100*Number(c),h=100*Number(i);var e=d?.options[d.selectedIndex]?.getAttribute("data-addr"),t=s?.options[s.selectedIndex]?.getAttribute("data-addr");try{const o=await(0,a.Ue)("WNat");let r=new n.eth.Contract(l,o);const c=(await a.zt.request({method:"eth_requestAccounts"}))[0],d={from:c,to:o,data:r.methods.undelegateAll().encodeABI()},s={from:c,to:o,data:r.methods.delegate(e,m).encodeABI()};if(showSpinner((async()=>{await a.zt.request({method:"eth_sendTransaction",params:[d]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),showSpinner((async()=>{await a.zt.request({method:"eth_sendTransaction",params:[s]}).then((e=>showConfirm(e))).catch((e=>showFail()))})),g){const e={from:c,to:o,data:r.methods.delegate(t,h).encodeABI()};showSpinner((async()=>{await a.zt.request({method:"eth_sendTransaction",params:[e]}).then((e=>showConfirm(e))).catch((e=>showFail()))}))}}catch(e){}}else $.alert("Please enter valid value")})):(downloadMetamaskFlag=!0,(0,a.yJ)()),t()}catch(f){t(f)}}),1)},268:(e,t,n)=>{n.d(t,{ET:()=>i,NM:()=>s,Ni:()=>a,Ue:()=>c,d_:()=>u,yJ:()=>d,zt:()=>l});const a={DistributionToDelegators:distributionAbi,VoterWhitelister:voterWhitelisterAbi,FtsoRewardManager:ftsoRewardAbi,WNat:wnatAbi,FlareRegistry:flareAbi};var o=document.getElementById("SelectedNetwork"),r=o?.options[o.selectedIndex].getAttribute("data-registrycontract");o?.options[o.selectedIndex].getAttribute("data-rpcurl"),o?.options[o.selectedIndex].getAttribute("data-chainidhex"),o?.options[o.selectedIndex].value,o?.options[o.selectedIndex].innerHTML;const l=window.ethereum;async function c(e){var t=document.getElementById("SelectedNetwork")?.options[document.getElementById("SelectedNetwork").selectedIndex].getAttribute("data-rpcurl");let n=new(new Web3(t).eth.Contract)(a.FlareRegistry,r);const o=await n.methods.getAllContracts().call(),l=(c=Object.values(o)[0],d=e,Object.keys(c).find((e=>c[e]===d)));var c,d;return o[1][l]}function d(){$.confirm({escapeKey:!0,backgroundDismiss:!1,icon:"fa fa-warning red",title:"<br>Metamask is not installed!",content:"Would you like to install Metamask in your browser?",type:"red",theme:"material",typeAnimated:!0,draggable:!1,buttons:{yes:{btnClass:"btn-red",keys:["enter"],action:function(){window.open("https://metamask.io/download/","_blank").focus()}},no:{}}})}function s(e){return+(Math.round(e+"e+4")+"e-4")}function i(e){document.getElementById("ConnectWalletText").innerText=e}function u(e){document.getElementById("TokenBalance").innerText=e}}},r={};function l(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e](n,n.exports,l),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(o,r,l)=>{var c;l&&((c=[]).d=-1);var d,s,i,u=new Set,m=o.exports,g=new Promise(((e,t)=>{i=t,s=e}));g[t]=m,g[e]=e=>(c&&e(c),u.forEach(e),g.catch((e=>{}))),o.exports=g,r((o=>{var r;d=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var r=[];r.d=0,o.then((e=>{l[t]=e,a(r)}),(e=>{l[n]=e,a(r)}));var l={};return l[e]=e=>e(r),l}}var c={};return c[e]=e=>{},c[t]=o,c})))(o);var l=()=>d.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(r=()=>t(l)).r=0;var n=e=>e!==c&&!u.has(e)&&(u.add(e),e&&!e.d&&(r.r++,e.push(r)));d.map((t=>t[e](n)))}));return r.r?s:l()}),(e=>(e?i(g[n]=e):s(m),a(c)))),c&&c.d<0&&(c.d=0)},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l(265)})();