(()=>{"use strict";var e={268:(e,t,n)=>{n.d(t,{ET:()=>i,EZ:()=>o,Ni:()=>a,OR:()=>d,Ue:()=>l,d_:()=>c,zt:()=>r});const a={DistributionToDelegators:distributionAbi,VoterWhitelister:voterWhitelisterAbi,FtsoRewardManager:ftsoRewardAbi,WNat:wnatAbi,FlareRegistry:flareAbi};document.getElementById("SelectedNetwork");const o={sgbLogo:'<g id="layer1-3"><polygon points="124.29 316.35 0 538.51 101.68 508.22 124.29 316.35"></polygon><polygon points="259.45 315.45 135.35 299.46 119.98 431.6 300.07 320.69 259.45 315.45"></polygon><polygon points="195.58 206.32 233.21 158.92 40.08 0 133.09 285.06 195.58 206.32"></polygon><polygon points="363.82 188.11 343.46 245.8 383.66 282.19 363.82 188.11"></polygon><polygon points="263.6 221.16 263.6 221.16 238.46 166.78 215.95 195.14 139.88 290.97 265.69 307.18 305.76 312.35 263.6 221.16"></polygon><polygon points="357 180.39 273.62 221.37 312.7 305.92 357 180.39"></polygon></g>',flrLogo:'<g id="layer1-2" transform="matrix(1.7,0,0,1.7,-0,120)"><path inkscape:connector-curvature="0" d="M 1.54,44.88 C 1.54,44.88 0,44.043066 0,43.309998 0,29.293727 13.305791,-2.1604174e-7 44.83,-2.1604171e-7 c 7.083657,1e-14 178,0 178,0 0,0 1.54998,0.83699994604171 1.54,1.57000021604171 -0.28292,20.783154 -17.20265,43.31 -44.86,43.31 -7.19693,0 -177.97,0 -177.97,0 z" id="path5842" /><path inkscape:connector-curvature="0" d="M -2.8370967e-7,133.36 C -0.01006008,134.093 1.5399997,134.93 1.5399997,134.93 c 0,0 73.8666673,0 110.8000003,0 25.5862,0 44.57708,-22.52684 44.86,-43.309998 0.01,-0.733001 -1.54,-1.570002 -1.54,-1.570002 0,0 -96.641983,0 -110.78,0 -25.4532,0 -44.5947035,22.52208 -44.88000028370967,43.31 z" id="path5840" /><path d="M 45.068739,202.56174 A 22.648399,22.301296 0 0 1 22.42034,224.86303 22.648399,22.301296 0 0 1 -0.22805977,202.56174 22.648399,22.301296 0 0 1 22.42034,180.26044 a 22.648399,22.301296 0 0 1 22.648399,22.3013 z" id="path5799" /></g>',costonLogo:'<g id="layer1-2"><path id="path5139" d="M 110.76382,510.98934 C 70.863727,504.70145 37.406693,477.5049 25.686374,441.83158 21.84306,430.13361 19.836232,415.02432 21.826707,412.77241 c 1.424546,-1.61163 13.378995,-1.76178 115.549773,-1.45126 113.89386,0.34613 113.96658,0.34786 123.75346,2.93072 36.37734,9.60039 64.41727,34.6805 75.08928,67.16306 3.80582,11.58382 5.84887,26.80869 3.89427,29.02001 -1.37588,1.55658 -14.29072,1.74294 -112.48957,1.62329 -61.01439,-0.0744 -113.60143,-0.55536 -116.8601,-1.06889 z M 58.12374,360.57705 c -25.044789,-7.74036 -40.80884,-31.76562 -36.505138,-55.6358 5.200706,-28.84542 33.769366,-47.59015 63.581441,-41.71767 20.233567,3.98566 34.715427,16.60405 40.884757,35.62379 7.82371,24.12021 -6.46935,51.40502 -31.733007,60.57687 -9.9696,3.61941 -26.540903,4.14674 -36.228053,1.15281 z M 21.826707,211.65048 c -1.990475,-2.2519 0.0164,-17.36119 3.859667,-29.05914 10.672006,-32.48258 38.711933,-57.56269 75.089266,-67.16307 9.78689,-2.58285 9.8596,-2.58458 123.75348,-2.93073 102.17076,-0.31051 114.12522,-0.16035 115.54977,1.45129 1.99047,2.25188 -0.0165,17.36119 -3.85967,29.05914 -10.67201,32.48257 -38.71194,57.56268 -75.08928,67.16306 -9.78688,2.58287 -9.8596,2.58459 -123.75346,2.93073 -102.170778,0.3105 -114.125227,0.16037 -115.549773,-1.45128 z"/></g>'},r=(new MetaMaskSDK.MetaMaskSDK({dappMetadata:{name:"FTSO Canada DApp",url:"https://ftsocan.com",base64Icon:"iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAApPXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZxpkh63ckX/YxVeAhIzloMxwjvw8n0uqkVJfPKLsMNkSGx2fzUhM++QyKI7"},logging:{sdk:!1},checkInstallationImmediately:!1,extensionOnly:!0}),window.ethereum);async function l(e,t,n){let o=new(new Web3(t).eth.Contract)(a.FlareRegistry,n);const r=await o.methods.getAllContracts().call(),l=(i=Object.values(r)[0],d=e,Object.keys(i).find((e=>i[e]===d)));var i,d;return r[1][l]}function i(e){document.getElementById("ConnectWalletText").innerText=e}function d(e){document.getElementById("Balance").innerText=e}function c(e){document.getElementById("TokenBalance").innerText=e}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(268),t={costonLogo:e.EZ.costonLogo,flrLogo:e.EZ.flrLogo,sgbLogo:e.EZ.sgbLogo,ercAbi:e.Ni.WNat,voterWhitelisterAbi:e.Ni.VoterWhitelister,distributionAbiLocal:e.Ni.DistributionToDelegators,ftsoRewardAbiLocal:e.Ni.FtsoRewardManager,wrapBool:!0,claimBool:!1,fdClaimBool:!1,isRealValue:!1,isAmount2Active:!1,metamaskInstalled:!1};async function a(t){var n=document.getElementById("Accounts").getAttribute("data-address");if("GET"===t){if(0===n.trim().length||null===n.trim()){const t=(await e.zt.request({method:"eth_accounts"}))[0].trim();return document.getElementById("Accounts").setAttribute("data-address",t),t}return n}if("SET"===t){const t=(await e.zt.request({method:"eth_accounts"}))[0].trim();return document.getElementById("Accounts").setAttribute("data-address",t),t}}async function o(e){$.confirm({escapeKey:!0,backgroundDismiss:!1,icon:"fa fa-spinner fa-spin",title:"Loading...",content:"We are processing your transaction. <br />Please wait...",theme:"material",type:"dark",typeAnimated:!0,draggable:!1,buttons:{ok:{isHidden:!0}},onContentReady:async function(){await e(),this.close()}})}async function r(e){$.confirm({escapeKey:!0,backgroundDismiss:!0,icon:"fa fa-solid fa-check green",title:"Transaction confirmed!",content:"Transaction hash: <br />",type:"green",theme:"material",typeAnimated:!0,draggable:!1,buttons:{ok:{action:function(){window.dappInit()}}},onContentReady:async function(){this.setContentAppend(e),this.showLoading(!0),this.hideLoading(!0)}})}function l(){$.confirm({escapeKey:!0,backgroundDismiss:!0,icon:"fa fa-warning red",title:"Transaction declined!",content:"",type:"red",theme:"material",typeAnimated:!0,draggable:!1,buttons:{ok:{}},onContentReady:function(){this.showLoading(!0),this.hideLoading(!0)}})}function i(e){return+(Math.round(e+"e+4")+"e-4")}async function d(e,t,n,a,o,r){return new Promise((l=>{setTimeout((()=>{var i=document.getElementById("SelectedNetwork");e=i?.options[i.selectedIndex].getAttribute("data-rpcurl"),t=i?.options[i.selectedIndex].getAttribute("data-chainidhex"),n=i?.options[i.selectedIndex].value,r=i?.options[i.selectedIndex].getAttribute("data-registrycontract"),a=i?.options[i.selectedIndex].innerHTML,o="W"+a;var d={};d.selectedNetwork=i,d.rpcUrl=e,d.chainIdHex=t,d.networkValue=n,d.tokenIdentifier=a,d.wrappedTokenIdentifier=o,d.flrAddr=r,l(d)}),200)}))}async function c(t){return new Promise((n=>{setTimeout((async()=>{var a=document.getElementById("SelectedNetwork");for(const e in dappNetworks){var o=document.createElement("option");o.value=dappNetworks[e].id,o.text=dappNetworks[e].chainidentifier,o.setAttribute("data-chainidhex","0x"+dappNetworks[e].chainid.toString(16)),o.setAttribute("data-rpcurl",dappNetworks[e].rpcurl),o.setAttribute("data-registrycontract",dappNetworks[e].registrycontract),a.appendChild(o)}a.options[0].setAttribute("selected","selected"),a.options.selectedIndex=0,await e.zt.request({method:"eth_requestAccounts"}).then((async function(){e.zt?(t.metamaskInstalled=!0,async function(){return!!(await e.zt.request({method:"eth_accounts"})).length}().then((async function(){await e.zt.request({method:"eth_chainId"}).then((async function(e){var o;o=a.options[0].getAttribute("data-chainidhex");for(var r=0;r<a.options.length;r++)a.options[r].getAttribute("data-chainidhex")===e?(a.options[r].setAttribute("selected","selected"),a.options.selectedIndex=r,o=e):a.options[r].removeAttribute("selected");if(!0===t.metamaskInstalled)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]}).catch((e=>console.error(e)))}catch(e){if(console.log(e),4902===e.code)try{await ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:o,rpcUrls:[a.options[a.selectedIndex].getAttribute("data-rpcurl")],chainName:`${a.options[a.selectedIndex].innerText} Mainnet`,iconUrls:[`https://portal.flare.network/token-logos/${a.options[a.selectedIndex].innerText}.svg`],nativeCurrency:{name:`${a.options[a.selectedIndex].innerText}`,symbol:`${a.options[a.selectedIndex].innerText}`,decimals:18}}]})}catch(e){throw e}}n()}))}))):(t.metamaskInstalled=!1,$.confirm({escapeKey:!0,backgroundDismiss:!1,icon:"fa fa-warning red",title:"<br>Metamask is not installed!",content:"Would you like to install Metamask in your browser?",type:"red",theme:"material",typeAnimated:!0,draggable:!1,buttons:{yes:{btnClass:"btn-red",keys:["enter"],action:function(){window.open("https://metamask.io/download/","_blank").focus()}},no:{}}}))}))}),200)}))}function s(e,t){null!=e&&(document.getElementById("tokenIdentifier").innerText=e),document.getElementById("wrappedTokenIdentifier").innerText=t}function m(e){var t=document.getElementById("WrapButton"),n=document.getElementById("WrapButtonText");Number(document.getElementById("AmountFrom").value.replace(/[^0-9]/g,""))<1?(t.style.backgroundColor="rgba(143, 143, 143, 0.8)",t.style.cursor="auto",n.innerText="Enter Amount",e.isRealValue=!1):(t.style.backgroundColor="rgba(253, 0, 15, 0.8)",t.style.cursor="pointer",e.isRealValue=!0,!0===e.wrapBool?n.innerText="Wrap":n.innerText="Unwrap")}function u(e){let t=document.getElementById("Amount1"),n=document.getElementById("ClaimButton");Number(t.value.replace(/[^0-9]/g,""))<1||Number(t.value.replace(/^0-9]/g,""))>100?(n.style.backgroundColor="rgba(143, 143, 143, 0.8)",n.style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",e.isRealValue=!1):50===Number(t.value.replace(/[^0-9]/g,""))||100===Number(t.value.replace(/[^0-9]/g,""))?(n.style.backgroundColor="rgba(253, 0, 15, 0.8)",n.style.cursor="pointer",e.isRealValue=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h(e)):(n.style.backgroundColor="rgba(143, 143, 143, 0.8)",n.style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",e.isRealValue=!1)}function g(e){let t=document.getElementById("Amount2"),n=document.getElementById("ClaimButton");Number(t.value.replace(/[^0-9]/g,""))<1||Number(t.value.replace(/[^0-9]/g,""))>100?(n.style.backgroundColor="rgba(143, 143, 143, 0.8)",n.style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",e.isRealValue=!1,e.isAmount2Active=!1):50===Number(t.value.replace(/[^0-9]/g,""))||100===Number(t.value.replace(/[^0-9]/g,""))?(n.style.backgroundColor="rgba(253, 0, 15, 0.8)",n.style.cursor="pointer",e.isRealValue=!0,e.isAmount2Active=!0,document.getElementById("ClaimButtonText").innerText="Delegate",h(e)):(n.style.backgroundColor="rgba(143, 143, 143, 0.8)",n.style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",e.isRealValue=!1,e.isAmount2Active=!1)}function h(e){let t=document.getElementById("ftso-1"),n=document.getElementById("ftso-2"),a=document.getElementById("Amount1"),o=document.getElementById("Amount2"),r=document.getElementById("ClaimButton");Number(a.value.replace(/[^0-9]/g,""))+Number(o.value.replace(/[^0-9]/g,""))>100||0===Number(t?.options[t.selectedIndex]?.getAttribute("data-ftso"))||0!==Number(o.value.replace(/[^0-9]/g,""))&&""!==o.value.replace(/[^0-9]/g,"")&&"0"===n?.options[n.selectedIndex]?.getAttribute("data-ftso")?(r.style.backgroundColor="rgba(143, 143, 143, 0.8)",r.style.cursor="auto",document.getElementById("ClaimButtonText").innerText="Enter Amount",e.isRealValue=!1,e.isAmount2Active=!1):(r.style.backgroundColor="rgba(253, 0, 15, 0.8)",r.style.cursor="pointer",e.isRealValue=!0,e.isAmount2Active=!0,document.getElementById("ClaimButtonText").innerText="Delegate")}function p(){document.getElementById("ClaimButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimButton").style.cursor="pointer"}function y(){document.getElementById("ClaimButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimButton").style.cursor="auto"}function f(){document.getElementById("ClaimFdButton").style.backgroundColor="rgba(253, 0, 15, 0.8)",document.getElementById("ClaimFdButton").style.cursor="pointer"}function w(){document.getElementById("ClaimFdButton").style.backgroundColor="rgba(143, 143, 143, 0.8)",document.getElementById("ClaimFdButton").style.cursor="auto"}function I(e){document.getElementById("ClaimButtonText").innerText=e}function B(e){document.getElementById("ClaimFdButtonText").innerText=e}window.dappInit=async n=>{if(1===n||"1"===n){let n,u,g,p,y,f=document.getElementById("SelectedNetwork");var h=document.getElementById("wrapUnwrap"),b=document.getElementById("FromIcon"),E=document.getElementById("ToIcon");document.getElementById("layer2").innerHTML=t.flrLogo,document.getElementById("layer3").innerHTML=t.flrLogo,await c(t).then((async()=>{d(u,n,g,p,y).then((async n=>{s(n.tokenIdentifier,n.wrappedTokenIdentifier),document.getElementById("ConnectWallet").addEventListener("click",(async()=>{!async function(t,n,o){document.getElementById("ConnectWalletText").innerHTML='<i class="fa fa-spinner fa-spin"></i>';let r=new Web3(t);try{const l=await(0,e.Ue)("WNat",t,n);let d=new r.eth.Contract(o.ercAbi,l);const c=await a("GET");(0,e.ET)(c);const s=await r.eth.getBalance(c),m=await d.methods.balanceOf(c).call();o.wrapBool?((0,e.OR)(i(r.utils.fromWei(s,"ether"))),(0,e.d_)(i(r.utils.fromWei(m,"ether")))):((0,e.OR)(i(r.utils.fromWei(m,"ether"))),(0,e.d_)(i(r.utils.fromWei(s,"ether"))))}catch(e){}}(n.rpcUrl,n.flrAddr,t)})),document.querySelector("#AmountFrom").addEventListener("input",(function(){m(t),function(){let e=document.getElementById("AmountFrom"),t=document.getElementById("AmountTo"),n="";var a;null==(a=e.value)||"number"!=typeof a&&isNaN(a-0)||(n=e.value),t.value=n}()})),document.getElementById("wrapUnwrap").addEventListener("click",(async()=>{!async function(e,t,n,a,o){!0===e.wrapBool?(e.wrapBool=!1,document.getElementById("wrapUnwrap").value="true",document.getElementById("FromIcon").style.color="#000",document.getElementById("ToIcon").style.color="#fd000f",document.getElementById("Wrap").style.color="#383a3b",document.getElementById("Unwrap").style.color="#fd000f",s(n,t),m(e)):(e.wrapBool=!0,document.getElementById("wrapUnwrap").value="false",document.getElementById("FromIcon").style.color="#fd000f",document.getElementById("ToIcon").style.color="#000",document.getElementById("Wrap").style.color="#fd000f",document.getElementById("Unwrap").style.color="#383a3b",s(t,n),m(e)),document.getElementById("ConnectWallet").click()}(t,n.tokenIdentifier,n.wrappedTokenIdentifier,n.rpcUrl,n.flrAddr)})),document.getElementById("WrapButton").addEventListener("click",(async()=>{if(!1===t.isRealValue)$.alert("Please enter valid value");else{var a=new Web3(n.rpcUrl);try{const l=await(0,e.Ue)("WNat",n.rpcUrl,n.flrAddr);let d=new a.eth.Contract(t.ercAbi,l);const c=(await e.zt.request({method:"eth_accounts"}))[0];let s=await a.eth.getBalance(c),m=await d.methods.balanceOf(c).call();var i=document.getElementById("AmountFrom");const u=Number(i.value.replace(/[^0-9]/g,"")),g=String(Number(a.utils.toWei(u,"ether"))),h=Number(a.utils.toWei(u,"ether")).toString(16);let p={};p=!0===t.wrapBool?{from:c,to:l,data:d.methods.deposit(h).encodeABI(),value:h}:{from:c,to:l,data:d.methods.withdraw(g).encodeABI()};const y=p;!0===t.wrapBool&&u>=Number(a.utils.fromWei(s,"ether"))||!1===t.wrapBool&&u>=Number(a.utils.fromWei(m,"ether"))?$.alert("Insufficient Balance!"):o((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[y]}).then((e=>r(e))).catch((e=>console.log(e)))}))}catch(e){console.log(e),l()}}})),document.getElementById("ConnectWallet").click(),"1"===n.networkValue?(document.getElementById("layer2").innerHTML=t.flrLogo,document.getElementById("layer3").innerHTML=t.flrLogo):"2"===n.networkValue?(document.getElementById("layer2").innerHTML=t.sgbLogo,document.getElementById("layer3").innerHTML=t.sgbLogo):(document.getElementById("layer2").innerHTML=t.costonLogo,document.getElementById("layer3").innerHTML=t.costonLogo),n.rpcUrl=f?.options[f.selectedIndex]?.getAttribute("data-rpcurl"),n.tokenIdentifier=f?.options[f.selectedIndex].innerHTML,n.wrappedTokenIdentifier="W"+n.tokenIdentifier,s(n.tokenIdentifier,n.wrappedTokenIdentifier),m(t),f.onchange=async()=>{n.rpcUrl=f?.options[f.selectedIndex].getAttribute("data-rpcurl"),n.chainIdHex=f?.options[f.selectedIndex].getAttribute("data-chainidhex"),n.networkValue=f?.options[f.selectedIndex].value,"1"===n.networkValue?(document.getElementById("layer2").innerHTML=t.flrLogo,document.getElementById("layer3").innerHTML=t.flrLogo):"2"===n.networkValue?(document.getElementById("layer2").innerHTML=t.sgbLogo,document.getElementById("layer3").innerHTML=t.sgbLogo):(document.getElementById("layer2").innerHTML=t.costonLogo,document.getElementById("layer3").innerHTML=t.costonLogo),n.tokenIdentifier=f?.options[f.selectedIndex].innerHTML,n.wrappedTokenIdentifier="W"+n.tokenIdentifier,s(n.tokenIdentifier,n.wrappedTokenIdentifier),h.value="false",b.style.color="#fd000f",E.style.color="#000",document.getElementById("Wrap").style.color="#fd000f",document.getElementById("Unwrap").style.color="#383a3b",t.wrapBool=!0;try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainIdHex}]}).catch((e=>console.error(e))),document.getElementById("ConnectWallet").click()}catch(e){}m(t)},window.ethereum.on("accountsChanged",(async t=>{0!==t.length?document.getElementById("ConnectWallet").click():(document.getElementById("ConnectWalletText").innerText="Connect Wallet",(0,e.OR)(0),(0,e.d_)(0),connectWalletBool=!1)})),window.ethereum.on("chainChanged",(async a=>{for(var o=0;o<f?.options.length;o++)if(f?.options[o].getAttribute("data-chainidhex")===String(a)){f.options.selectedIndex=o,f.dispatchEvent(new Event("change"));break}if(!0===t.metamaskInstalled)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainIdHex}]})}catch(e){}}))}))})),setInterval((function(){navigator.onLine||$.alert("Your Internet connection is unstable! Please make sure you can access the Internet.")}),2e4)}else if(2===n||"2"===n){let n,s,m,h=document.getElementById("SelectedNetwork"),p=document.getElementById("ftso-1"),y=document.getElementById("ftso-2");await c(t).then((async()=>{d(n,s,m).then((async n=>{document.getElementById("ConnectWallet").addEventListener("click",(async()=>{!async function(t,n,o){document.getElementById("ConnectWalletText").innerHTML='<i class="fa fa-spinner fa-spin"></i>';let r=new Web3(t);try{const l=await(0,e.Ue)("WNat",t,n);let d=new r.eth.Contract(o.ercAbi,l);const c=await a("GET");(0,e.ET)(c);const s=await d.methods.balanceOf(c).call();(0,e.d_)(i(r.utils.fromWei(s,"ether")))}catch(e){}}(n.rpcUrl,n.flrAddr,t)})),document.getElementById("Amount1").addEventListener("input",(function(){u(t);var e=this.value;-1===e.search("%")&&(e+="%");var n=e.length-1;0===n?(this.value=e.substring(0,n),this.setSelectionRange(n,n)):(this.value=e.substring(0,n)+"%",this.setSelectionRange(n,n))})),document.getElementById("Amount2").addEventListener("input",(function(){g(t);var e=this.value;-1===e.search("%")&&(e+="%");var n=e.length-1;0===n?(this.value=e.substring(0,n),this.setSelectionRange(n,n)):(this.value=e.substring(0,n)+"%",this.setSelectionRange(n,n))})),document.getElementById("ClaimButton").addEventListener("click",(async()=>{let i=new Web3(n.rpcUrl);try{const d=await(0,e.Ue)("WNat",n.rpcUrl,n.flrAddr);let c=new i.eth.Contract(t.ercAbi,d);const s=await a("GET"),m=(await c.methods.delegatesOf(s).call())[0];let u=[];fetch(dappUrlBaseAddr+"bifrost-wallet.providerlist.json").then((e=>e.json())).then((a=>{var i;a.providers.sort(((e,t)=>e.name>t.name?1:-1));for(var d=0;d<a.providers.length;d++){i=d;for(var c=0;c<m.length;c++)a.providers[d].address===m[c]&&(void 0!==u[0]&&null!==u[0]?u[1]=a.providers[i].name:u[0]=a.providers[i].name)}0!==m.length?async function(n,a){$.confirm({escapeKey:!1,backgroundDismiss:!1,icon:"fa fa-solid fa-flag red",title:"Already delegated!",content:"You have already delegated to ",type:"red",theme:"material",typeAnimated:!0,draggable:!1,buttons:{undelegate:{btnClass:"btn-red",action:function(){!async function(n){let a=new Web3(n.rpcUrl);a.setProvider(e.zt);try{const i=await(0,e.Ue)("WNat",n.rpcUrl,n.flrAddr);let d=new a.eth.Contract(t.ercAbi,i);const c={from:(await e.zt.request({method:"eth_requestAccounts"}))[0],to:i,data:d.methods.undelegateAll().encodeABI()};o((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[c]}).then((e=>r(e))).catch((e=>l()))}))}catch(e){}}(a)}},cancel:function(){}},onContentReady:function(){n.length>1?this.setContentAppend(n[0]+" and "+n[1]+". <br />"):this.setContentAppend(n[0]+". <br />"),this.setContentAppend("Are you sure you want to undelegate? <br />"),this.showLoading(!0),this.hideLoading(!0)}})}(u,n):async function(n){if(!1===t.isRealValue)$.alert("Please enter valid value. (50% or 100%)");else{let d=document.getElementById("Amount1"),c=document.getElementById("Amount2"),s=document.getElementById("ftso-1"),m=document.getElementById("ftso-2"),u=new Web3(n.rpcUrl);u.setProvider(e.zt);const g=d.value,h=c.value,p=g.replace(/[^0-9]/g,""),y=h.replace(/[^0-9]/g,""),f=100*Number(p),w=100*Number(y);var a=s?.options[s.selectedIndex]?.getAttribute("data-addr"),i=m?.options[m.selectedIndex]?.getAttribute("data-addr");try{const d=await(0,e.Ue)("WNat",n.rpcUrl,n.flrAddr);let c=new u.eth.Contract(t.ercAbi,d);const s=(await e.zt.request({method:"eth_requestAccounts"}))[0],m={from:s,to:d,data:c.methods.delegate(a,f).encodeABI()};if(o((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[m]}).then((e=>r(e))).catch((e=>l()))})),t.isAmount2Active){const t={from:s,to:d,data:c.methods.delegate(i,w).encodeABI()};o((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[t]}).then((e=>r(e))).catch((e=>l()))}))}}catch(e){}}}(n)}))}catch(e){}})),document.getElementById("ConnectWallet").click(),await async function(n,a,o,r){return new Promise((l=>{setTimeout((async()=>{var i='<option value="" data-ftso="0" disabled selected hidden>Select FTSO</option>',d="",c="";let s=new Web3(o);try{const l=await(0,e.Ue)("VoterWhitelister",o,r);let m=new s.eth.Contract(t.voterWhitelisterAbi,l);const u=await m.methods.getFtsoWhitelistedPriceProviders("0").call(),g=JSON.stringify(u);fetch(dappUrlBaseAddr+"bifrost-wallet.providerlist.json").then((e=>e.json())).then((e=>{let t;e.providers.sort(((e,t)=>e.name>t.name?1:-1));for(var o=0;o<e.providers.length;o++)for(var r=0;r<u.length;r++)if(e.providers[o].address===u[r]){if(t=o,!g.includes(u[r])){$.alert("The FTSO you are delegated to is invalid!");break}"FTSOCAN"===e.providers[t].name?d+=`<option value="${r}" data-img="${dappUrlBaseAddr}assets/${u[r]}.png" data-addr="${u[r]}" data-ftso="1">${e.providers[t].name}</option>`:c+=`<option value="${r}" data-img="${dappUrlBaseAddr}assets/${u[r]}.png" data-addr="${u[r]}" data-ftso="1">${e.providers[t].name}</option>`,n.innerHTML=i+d+c,a.innerHTML=i+d+c}}))}catch(e){console.log(e)}l()}),200)}))}(p,y,n.rpcUrl,n.flrAddr),u(t),t.isAmount2Active&&g(t),p.onchange=async()=>{let e=p?.options[p.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon1").src=e,u(t)},y.onchange=async()=>{let e=y?.options[y.selectedIndex]?.getAttribute("data-img");document.getElementById("delegatedIcon2").src=e,g(t)},h.onchange=async()=>{n.rpcUrl=h?.options[h.selectedIndex]?.getAttribute("data-rpcurl"),n.chainIdHex=h?.options[h.selectedIndex]?.getAttribute("data-chainidhex"),n.networkValue=h?.options[h.selectedIndex]?.value,u(t),t.isAmount2Active&&g(t);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainIdHex}]}).catch((e=>console.error(e))),document.getElementById("ConnectWallet").click()}catch(e){}},window.ethereum.on("accountsChanged",(async t=>{0!==t.length?document.getElementById("ConnectWallet").click():(document.getElementById("ConnectWalletText").innerText="Connect Wallet",(0,e.OR)(0),(0,e.d_)(0),connectWalletBool=!1)})),window.ethereum.on("chainChanged",(async a=>{for(var o=0;o<h?.options.length;o++)if(h?.options[o].getAttribute("data-chainidhex")===String(a)){h.options.selectedIndex=o,h.dispatchEvent(new Event("change"));break}if(!0===t.metamaskInstalled)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainIdHex}]})}catch(e){}}))}))}))}else if(3===n||"3"===n){let n,m,u,g,h,b=document.getElementById("SelectedNetwork");document.getElementById("layer3").innerHTML=t.flrLogo,await c(t).then((async()=>{d(m,n,u,g,h).then((async n=>{s(null,n.wrappedTokenIdentifier),document.getElementById("ConnectWallet").addEventListener("click",(async()=>{!async function(t,n,o){document.getElementById("ConnectWalletText").innerHTML='<i class="fa fa-spinner fa-spin"></i>';var r=document.getElementById("after"),l=document.getElementById("SelectedNetwork");let d=new Web3(t);try{const u=await(0,e.Ue)("WNat",t,n),g=await(0,e.Ue)("DistributionToDelegators",t,n),h=await(0,e.Ue)("FtsoRewardManager",t,n),b=await(0,e.Ue)("VoterWhitelister",t,n);let E=new d.eth.Contract(o.ercAbi,u),v=new d.eth.Contract(o.distributionAbiLocal,g),A=new d.eth.Contract(o.ftsoRewardAbiLocal,h),T=new d.eth.Contract(o.voterWhitelisterAbi,b);const C=await a("GET");(0,e.ET)(C);const x=await E.methods.balanceOf(C).call();(0,e.d_)(i(d.utils.fromWei(x,"ether"))),B(0),I(0),Number(document.getElementById("ClaimButtonText").innerText)>=1?(p(),o.claimBool=!0):(y(),o.claimBool=!1),Number(document.getElementById("ClaimFdButtonText").innerText)>=1?(f(),o.fdClaimBool=!0):(w(),o.fdClaimBool=!1),m=".wrap-box-ftso",document.querySelectorAll(m).forEach((e=>e.remove()));const k=await T.methods.getFtsoWhitelistedPriceProviders(0).call(),L=JSON.stringify(k),W=await E.methods.delegatesOf(C).call(),N=W[0],U=W[1][0]/100n;let M="",R="";fetch(dappUrlBaseAddr+"bifrost-wallet.providerlist.json").then((e=>e.json())).then((e=>{var t;e.providers.sort(((e,t)=>e.name>t.name?1:-1));for(var n=0;n<e.providers.length;n++){t=n;for(var a=0;a<N.length;a++)e.providers[n].address===N[a]&&(L.includes(N[a])?("FTSOCAN"===e.providers[t].name?M=`<div class="wrap-box-ftso" data-addr="${N[a]}"><div class="wrap-box-content"><img src="${dappUrlBaseAddr}assets/${N[a]}.png" alt="${e.providers[t].name}" class="delegated-icon" id="delegatedIcon"/><div class="ftso-identifier"><span id="delegatedName">${e.providers[t].name}</span></div><div class="wrapper"><span id="TokenBalance">${U}%</span></div></div></div>`:R+=`<div class="wrap-box-ftso" data-addr="${N[a]}"><div class="wrap-box-content"><img src="${dappUrlBaseAddr}assets/${N[a]}.png" alt="${e.providers[t].name}" class="delegated-icon" id="delegatedIcon"/><div class="ftso-identifier"><span id="delegatedName">${e.providers[t].name}</span></div><div class="wrapper"><span id="TokenBalance">${U}%</span></div></div></div>`,r.innerHTML=M+R):$.alert("The FTSO you have delegated to is invalid!"))}}));const H=await A.methods.getEpochsWithUnclaimedRewards(C).call();let S,_=0;for(var c=0;c<H.length;c++)S=await A.methods.getStateOfRewards(C,H[c]).call(),_+=Number(S[1]);const F=d.utils.fromWei(_,"ether");if("FLR"===l.options[l.selectedIndex].innerText){let e;const t=await v.methods.getClaimableMonths().call();for(var s=0;s<t.length;s++)e+=await v.methods.getClaimableAmountOf(C,Number(t[s])).call();B(String(i(d.utils.fromWei(e,"ether")))),Number(document.getElementById("ClaimFdButtonText").innerText)>=1?(f(),o.fdClaimBool=!0):(w(),o.fdClaimBool=!1)}I(i(F)),Number(document.getElementById("ClaimButtonText").innerText)>=1?(p(),o.claimBool=!0):(I(0),y(),o.claimBool=!1)}catch(e){console.error(e)}var m}(n.rpcUrl,n.flrAddr,t)})),document.getElementById("ClaimButton").addEventListener("click",(async()=>{if(!0===t.claimBool){let s=new Web3(n.rpcUrl);var a=document.getElementById("RewardsCheck");try{const m=(await e.zt.request({method:"eth_requestAccounts"}))[0],u=await(0,e.Ue)("WNat",n.rpcUrl,n.flrAddr);let g=new s.eth.Contract(t.ercAbi,u);const h=await(0,e.Ue)("FtsoRewardManager",n.rpcUrl,n.flrAddr);let p=new s.eth.Contract(t.ftsoRewardAbiLocal,h);const f=await p.methods.getEpochsWithUnclaimedRewards(m).call();var d,c=await s.eth.getBalance(h);if(Number(document.getElementById("ClaimButtonText").innerText)>=1&&Number(document.getElementById("ClaimButtonText").innerText)<c){d=a.checked?{from:m,to:h,data:p.methods.claim(m,m,String(f[f.length-1]),!0).encodeABI()}:{from:m,to:h,data:p.methods.claim(m,m,String(f[f.length-1]),!1).encodeABI()},o((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[d]}).then((e=>r(e))).catch((e=>l()))}));const n=await g.methods.balanceOf(m).call();I(0),y(t.claimBool),(0,e.d_)(i(s.utils.fromWei(n,"ether")))}else $.alert("The Rewards Bucket is empty! Please try again later.")}catch(e){console.log(e)}}})),document.getElementById("ClaimFdButton").addEventListener("click",(async()=>{if(!0===t.fdClaimBool){let s=new Web3(n.rpcUrl);var a=document.getElementById("RewardsCheck");try{const m=(await e.zt.request({method:"eth_requestAccounts"}))[0],u=await(0,e.Ue)("WNat",n.rpcUrl,n.flrAddr);let g=new s.eth.Contract(t.ercAbi,u);const h=await(0,e.Ue)("DistributionToDelegators",n.rpcUrl,n.flrAddr);let p=new s.eth.Contract(t.distributionAbiLocal,h);const y=await p.methods.getClaimableMonths().call();var d,c=await s.eth.getBalance(h);if(Number(document.getElementById("ClaimFdButtonText").innerText>=1)&&Number(document.getElementById("ClaimFdButtonText").innerText)<c){for(const t in y)t.includes("_")||(d=a.checked?{from:m,to:h,data:p.methods.claim(m,m,y[t],!0).encodeABI()}:{from:m,to:h,data:p.methods.claim(m,m,y[t],!1).encodeABI()},o((async()=>{await e.zt.request({method:"eth_sendTransaction",params:[d]}).then((e=>r(e))).catch((e=>l()))})));B(0),w(t.fdClaimBool);const n=await g.methods.balanceOf(m).call();(0,e.d_)(i(s.utils.fromWei(n,"ether")))}else $.alert("The FlareDrop Bucket is empty! Please try again later.")}catch(e){}}})),document.getElementById("ConnectWallet").click(),"1"===n.networkValue?document.getElementById("layer3").innerHTML=t.flrLogo:"2"===n.networkValue?document.getElementById("layer3").innerHTML=t.sgbLogo:document.getElementById("layer3").innerHTML=t.costonLogo,b.onchange=async()=>{n.rpcUrl=b?.options[b.selectedIndex]?.getAttribute("data-rpcurl"),n.chainIdHex=b?.options[b.selectedIndex]?.getAttribute("data-chainidhex"),n.networkValue=b?.options[b.selectedIndex]?.value,"1"===n.networkValue?document.getElementById("layer3").innerHTML=t.flrLogo:"2"===n.networkValue?document.getElementById("layer3").innerHTML=t.sgbLogo:document.getElementById("layer3").innerHTML=t.costonLogo;try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainIdHex}]}).catch((e=>console.error(e))),document.getElementById("ConnectWallet").click()}catch(e){}},window.ethereum.on("accountsChanged",(async t=>{0!==t.length?document.getElementById("ConnectWallet").click():(document.getElementById("ConnectWalletText").innerText="Connect Wallet",(0,e.OR)(0),(0,e.d_)(0),connectWalletBool=!1)})),window.ethereum.on("chainChanged",(async a=>{for(var o=0;o<b?.options.length;o++)if(b?.options[o].getAttribute("data-chainidhex")===String(a)){b.options.selectedIndex=o,b.dispatchEvent(new Event("change"));break}if(!0===t.metamaskInstalled)try{await e.zt.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainIdHex}]})}catch(e){}}))}))}))}}})()})();